---
import { CaretDown } from '@phosphor-icons/react';

const faqs = [
  {
    question: 'What kind of businesses do you work with?',
    answer:
      'I work with fast-growing startups and mid-sized companies that are dealing with data scaling challenges. This includes e-commerce, fintech, healthcare, and any business where data volume and complexity are increasing rapidly.',
  },
  {
    question: 'What happens during the first call?',
    answer:
      "The discovery call is a no-obligation conversation where we discuss your current challenges, goals, and technical setup. I'll ask about your data infrastructure, pain points, and growth plans to create a tailored scaling strategy.",
  },
  {
    question: 'How do I know if I need help with scaling?',
    answer:
      "If you're experiencing slow query times, inconsistent data, frequent system crashes under load, or if you're unsure how to handle increasing data volumes, it's time to consider scaling assistance.",
  },
  {
    question: 'Do you work with existing systems or only new builds?',
    answer:
      'I work with both! I can optimize and scale existing systems or design and build new ones from scratch. Many projects involve enhancing current infrastructure rather than complete rebuilds.',
  },
  {
    question: 'What kinds of problems can you help solve?',
    answer:
      "I help solve issues like slow data processing, unreliable pipelines, poor data quality, inefficient storage, lack of real-time insights, and systems that can't handle growth.",
  },
  {
    question: "What's your typical process like?",
    answer:
      'We start with discovery, then move to planning and design, followed by implementation and testing. I provide regular updates and ensure everything works smoothly before handover.',
  },
  {
    question: 'How long does a typical project take?',
    answer:
      "Projects vary widely - from 2-4 weeks for smaller optimizations to 3-6 months for complex system rebuilds. I'll give you a specific timeline during our discovery call.",
  },
  {
    question: 'Can you work with my in-house dev team?',
    answer:
      'Absolutely! I can collaborate with your existing team, provide guidance, or handle the entire project. Many clients prefer a hybrid approach where I lead while training their developers.',
  },
];
---

<section class="section faq">
  <div class="section-content">
    <h2>Frequently Asked Questions</h2>
    <div class="faq-grid">
      {
        faqs.map((faq, _) => (
          <div class="faq-item">
            <button class="faq-question" aria-expanded="false">
              <span>{faq.question}</span>
              <CaretDown weight="bold" size={24} className="caret" />
            </button>
            <div class="faq-answer">
              <div class="faq-answer-content">
                <p>{faq.answer}</p>
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>

<style>
  .section {
    padding: 4rem 2rem;
    max-width: 1200px;
    margin: 0 auto;
  }

  .section h2 {
    font-size: 2.5rem;
    margin-bottom: 1.5rem;
    background: linear-gradient(45deg, var(--text-color), #00c0fc);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .faq-grid {
    margin-top: 3rem;
  }

  .faq-item {
    border-bottom: 1px solid var(--border-color);
  }

  .faq-question {
    width: 100%;
    padding: 1.5rem 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: none;
    border: none;
    text-align: left;
    cursor: pointer;
    color: var(--text-color);
    font-size: 1.1rem;
    font-weight: 500;
  }

  .faq-question:hover {
    color: var(--star-color);
  }

  .caret {
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .faq-question[aria-expanded='true'] .caret {
    transform: rotate(180deg);
  }

  .faq-answer {
    height: 0;
    overflow: hidden;
    transition: height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .faq-answer-content {
    opacity: 0;
    transform: translateY(-8px);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    transition-delay: 0.1s;
    padding: 0 0 1.5rem;
  }

  .faq-item[aria-expanded='true'] .faq-answer {
    height: var(--expanded-height, auto);
  }

  .faq-item[aria-expanded='true'] .faq-answer-content {
    opacity: 1;
    transform: translateY(0);
  }

  .faq-answer p {
    margin: 0;
    font-size: 1rem;
    line-height: 1.6;
    color: var(--text-color);
    opacity: 0.9;
  }
</style>

<script>
  document.querySelectorAll('.faq-question').forEach(button => {
    button.addEventListener('click', () => {
      const faqItem = button.parentElement;
      const faqAnswer = faqItem?.querySelector('.faq-answer') as HTMLElement;
      const faqContent = faqItem?.querySelector('.faq-answer-content') as HTMLElement;
      const isExpanded = button.getAttribute('aria-expanded') === 'true';

      // Close all other items
      document.querySelectorAll('.faq-item').forEach(item => {
        if (item !== faqItem) {
          item.setAttribute('aria-expanded', 'false');
          const question = item.querySelector('.faq-question');
          if (question) {
            question.setAttribute('aria-expanded', 'false');
          }
          const answer = item.querySelector('.faq-answer') as HTMLElement;
          if (answer) {
            answer.style.height = '0';
          }
        }
      });

      // Toggle current item
      if (faqAnswer && faqContent) {
        if (!isExpanded) {
          // Opening
          faqAnswer.style.height = `${faqContent.offsetHeight}px`;
        } else {
          // Closing
          faqAnswer.style.height = '0';
        }
      }

      button.setAttribute('aria-expanded', String(!isExpanded));
      if (faqItem) {
        faqItem.setAttribute('aria-expanded', String(!isExpanded));
      }
    });
  });

  // Set initial heights for all FAQ answers
  document.querySelectorAll('.faq-answer').forEach(answer => {
    const content = answer.querySelector('.faq-answer-content');
    if (content) {
      (answer as HTMLElement).style.height = '0';
    }
  });
</script>
